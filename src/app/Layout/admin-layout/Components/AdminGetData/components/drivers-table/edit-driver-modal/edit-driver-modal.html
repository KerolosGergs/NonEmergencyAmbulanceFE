<div class="modal-backdrop" (click)="close()"></div>
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">
        <i class="bi bi-pencil-square icon"></i>
        <span>Edit Driver Details</span>
      </h5>
      <button type="button" class="btn-close" (click)="close()" aria-label="Close"></button>
    </div>

    <form #editDriverForm="ngForm" (ngSubmit)="onFormSubmit(editDriverForm)">
      <div class="modal-body">
        <p class="text-muted mb-4">
          You are editing the profile for <strong>{{ driver?.userFullName }}</strong>.
        </p>

        <div class="mb-4">
          <label for="fullName" class="form-label">Full Name</label>
          <input
            type="text"
            class="form-control"
            id="fullName"
            name="userFullName"
            [(ngModel)]="editableDriver.userFullName"
            required
            #fullName="ngModel"
            [class.is-invalid]="fullName.invalid && fullName.touched"
          />
          <div *ngIf="fullName.invalid && fullName.touched" class="invalid-feedback">
            Full name is required.
          </div>
        </div>

        <div class="mb-4">
          <label for="phoneNumber" class="form-label">Phone Number</label>
          <input
            type="text"
            class="form-control"
            id="phoneNumber"
            name="phoneNumber"
            [(ngModel)]="editableDriver.phoneNumber"
            required
            #phoneNumber="ngModel"
            [class.is-invalid]="phoneNumber.invalid && phoneNumber.touched"
          />
          <div *ngIf="phoneNumber.invalid && phoneNumber.touched" class="invalid-feedback">
            Phone number is required.
          </div>
        </div>

        <div class="mb-3">
          <label for="licenseNumber" class="form-label">License Number</label>
          <input
            type="text"
            class="form-control"
            id="licenseNumber"
            name="licenseNumber"
            [(ngModel)]="editableDriver.licenseNumber"
            required
            #licenseNumber="ngModel"
            [class.is-invalid]="licenseNumber.invalid && licenseNumber.touched"
          />
          <div *ngIf="licenseNumber.invalid && licenseNumber.touched" class="invalid-feedback">
            License number is required.
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="close()">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="isLoading || editDriverForm.invalid">
          <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          {{ isLoading ? 'Saving...' : 'Save Changes' }}
        </button>
      </div>
    </form>
  </div>
</div>
