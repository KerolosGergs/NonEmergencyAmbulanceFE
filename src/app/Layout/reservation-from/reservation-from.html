<app-nav></app-nav>
<div class="emergency-form-container">
  <div class="form-header">
    <h1>Emergency Request Form</h1>
    <p>Please provide details for your emergency assistance request</p>
  </div>

  <form #emergencyForm="ngForm" (ngSubmit)="onSubmit()" class="emergency-form">
    <div class="form-grid">
      <!-- Static Map Placeholder -->
      <div class="map-section">
        <div class="map-header">
          <h3>Select Locations</h3>
          <p>Click buttons to select addresses manually</p>
        </div>
        <iframe width="100%" height="300" frameborder="0" style="border:0"
          src="https://www.google.com/maps/embed/v1/view?key=YOUR_API_KEY&center=24.7136,46.6753&zoom=10&maptype=roadmap"
          allowfullscreen>
        </iframe>


        <div class="map-controls">
          <button type="button" class="map-control-btn pickup" [class.active]="isSelectingPickup"
            (click)="toggleLocationSelection('pickup')">
            üìç Set Pickup Location
          </button>
          <button type="button" class="map-control-btn dropoff" [class.active]="isSelectingDropoff"
            (click)="toggleLocationSelection('dropoff')">
            üèÅ Set Drop-off Location
          </button>
        </div>
      </div>

      <!-- Form Fields Section -->
      <div class="form-fields">
        <div class="field-group">
          <label for="pickupAddress">Pickup Address *</label>
          <input type="text" id="pickupAddress" name="pickupAddress" [(ngModel)]="formData.pickupAddress" required
            class="form-input" placeholder="Enter pickup address manually" [readonly]="!isSelectingPickup" />
        </div>

        <div class="field-group">
          <label for="dropOffAddress">Drop-off Address *</label>
          <input type="text" id="dropOffAddress" name="dropOffAddress" [(ngModel)]="formData.dropOffAddress" required
            class="form-input" placeholder="Enter drop-off address manually" [readonly]="!isSelectingDropoff" />
        </div>

        <div class="field-group">
          <label for="scheduledDate">Scheduled Date & Time *</label>
          <input type="datetime-local" id="scheduledDate" name="scheduledDate" [(ngModel)]="formData.scheduledDate"
            required class="form-input" [min]="minDateTime" />
        </div>

        <div class="field-group">
          <label for="emergencyType">Emergency Type *</label>
          <select id="emergencyType" name="emergencyType" [(ngModel)]="formData.emergencyType" required
            class="form-input">
            <option value="">Select emergency type</option>
            <option value="medical">Medical Emergency</option>
            <option value="fire">Fire Emergency</option>
            <option value="police">Police Emergency</option>
            <option value="transport">Emergency Transport</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div class="field-group">
          <label for="notes">Additional Notes</label>
          <textarea id="notes" name="notes" [(ngModel)]="formData.notes" class="form-textarea"
            placeholder="Provide any additional details about the emergency..." rows="4"></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-btn" [disabled]="emergencyForm.invalid || isSubmitting">
            {{ isSubmitting ? 'Submitting...' : 'Submit Emergency Request' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Status Messages -->
    <div class="status-messages">
      @if (successMessage) {

      <div class="success-message">
        ‚úÖ {{ successMessage }}
      </div>
      }
      @if (errorMessage) {

      <div class="error-message">
        ‚ùå {{ errorMessage }}
      </div>
      }
      @if (validationErrors.length > 0)
      {
      <div class="validation-errors">
        <ul>
          @for (error of validationErrors; track $index) {

          <li>{{ error }}</li>
          }
        </ul>
      </div>

      }
    </div>
  </form>
</div>


<app-footer></app-footer>